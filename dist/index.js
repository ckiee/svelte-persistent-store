!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).PersistentStore={})}(this,(function(e){"use strict";var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},t(e,n)},n=function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};function r(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}var o=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}(n,e),n}(Error),i={},a=new Set,s={};function c(e,t){if("string"==typeof e||"number"==typeof e&&!isNaN(e)&&Math.abs(e)!==1/0||null==e||"boolean"==typeof e)return e;var r=t.indexOf(e);if(-1!==r)return"#$@__instance__"+r;t.push(e);var o=t.length-1;if(e.constructor===Array){var i=e.map((function(e){return c(e,t)}));return i.unshift("#$@__reference__"+o),i}if(e.constructor===Object){var u=Object.fromEntries(Object.entries(e).map((function(e){return[e[0],c(e[1],t)]})));return u["#$@__reference__"]=o,u}a.add(e.constructor);var l={};l=Object.defineProperty(l,"#$@__constructor__",{value:e.constructor.name,enumerable:!0}),l=Object.defineProperty(l,"#$@__reference__",{value:o,enumerable:!0});var f=function(e,t){if(Object.keys(s).includes(e.constructor.name))return s[e.constructor.name].toPlain(e,(function(e){return c(e,t)}))}(e,t);return void 0!==f?n(n({},f),l):(Object.getOwnPropertyNames(e).forEach((function(n){Object.defineProperty(l,n,{value:c(e[n],t),enumerable:!0})})),l)}function u(e,t,n){var r;if("string"==typeof e&&0===e.indexOf("#$@__instance__"))return n[l=parseInt(e.slice(15))];if("string"==typeof e||"number"==typeof e||null==e||"boolean"==typeof e)return e;if(e.constructor===Array){if(0===e.length)return[];var i=e.shift();if("string"!=typeof i||"#$@__reference__"!==i.substring(0,16)){if(0===Object.keys(n).length)return e.unshift(i),e;throw new o}var a=[];n[l=i.slice(16)]=a;for(var c=0;c<e.length;c++)a[c]=u(e[c],t,n);return a}if(e.constructor===Object){var l;if(null===(l=null!==(r=e["#$@__reference__"])&&void 0!==r?r:null)){if(0===Object.keys(n).length)return e;throw new o}if(delete e["#$@__reference__"],!Object.keys(e).includes("#$@__constructor__")){for(var f in a={},n[l]=a,e)a[f]=u(e[f],t,n);return a}var d=e["#$@__constructor__"];delete e["#$@__constructor__"];var p=function(e,t,n,r){if(Object.keys(s).includes(t))return s[t].fromPlain(e,(function(e){return u(e,n,r)}))}(e,d,t,n);if(void 0!==p)return p;if(!Object.keys(t).includes(d))throw new Error("The class "+d+" is not allowed");var y={};for(var f in n[l]=y,e)y[f]=u(e[f],t,n);return Object.setPrototypeOf(y,t[d].prototype),y}}function l(e){i[e.name]=e}!function(e,t){e("Date",(e=>({time:e.getTime()})),(function(e){let t=new Date;return t.setTime(e.time),t})),e("BigInt",(e=>({number:e.toString()})),(e=>BigInt(e.number))),e("String",(e=>({text:e.toString()})),(e=>new String(e.text))),e("RegExp",(e=>({source:e.source,flags:e.flags})),(e=>new RegExp(e.source,e.flags))),e("Number",(function(e){let t={nan:!1,infinity:!1,positive:!0,number:null};return Math.abs(e)===1/0?(t.infinity=!0,t.positive=Math.abs(e)===e,t):isNaN(e)?(t.nan=!0,t):(t.number=e.valueOf(),t)}),(function(e){return e.nan?NaN:e.infinity?1/0*(e.positive?1:-1):new Number(e.number)})),e("Map",((e,t)=>({data:Array.from(e.entries()).map((e=>t(e)))})),(function(e,t){const n=new Map;return e.data.map((e=>t(e))).forEach((([e,t])=>n.set(e,t))),n})),e("Set",((e,t)=>({data:Array.from(e.values()).map((e=>t(e)))})),(function(e,t){const n=new Set;return e.data.map((e=>t(e))).forEach((e=>n.add(e))),n})),e("ArrayBuffer",((e,t)=>({data:t(new Uint8Array(e))})),((e,t)=>t(e.data).buffer)),e("DataView",((e,t)=>({buffer:t(e.buffer),offset:e.byteOffset,length:e.byteLength})),((e,t)=>new DataView(t(e.buffer),e.offset,e.length))),[Error,EvalError,RangeError,AggregateError,ReferenceError,SyntaxError,TypeError,URIError,Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array].forEach((e=>t(e)))}((function(e,t,n){s[e]={toPlain:t,fromPlain:n}}),l);var f={};function d(e){return new Promise(((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)}))}function p(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=d(n);return(e,n)=>r.then((r=>n(r.transaction(t,e).objectStore(t))))}let y;function g(){return y||(y=p("keyval-store","keyval")),y}function m(e){let t,n=e[0],r=1;for(;r<e.length;){const o=e[r],i=e[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(t=n,n=i(n)):"call"!==o&&"optionalCall"!==o||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}!function(e){e.defaults={},e.set=function(t,n,r){var o=r||{},i=e.defaults,a=o.expires||i.expires,s=o.domain||i.domain,c=void 0!==o.path?o.path:void 0!==i.path?i.path:"/",u=void 0!==o.secure?o.secure:i.secure,l=void 0!==o.httponly?o.httponly:i.httponly,f=void 0!==o.samesite?o.samesite:i.samesite,d=a?new Date("number"==typeof a?(new Date).getTime()+864e5*a:a):0;document.cookie=t.replace(/[^+#$&^`|]/g,encodeURIComponent).replace("(","%28").replace(")","%29")+"="+n.replace(/[^+#$&/:<-\[\]-}]/g,encodeURIComponent)+(d&&d.getTime()>=0?";expires="+d.toUTCString():"")+(s?";domain="+s:"")+(c?";path="+c:"")+(u?";secure":"")+(l?";httponly":"")+(f?";samesite="+f:"")},e.get=function(e){for(var t=document.cookie.split(";");t.length;){var n=t.pop(),r=n.indexOf("=");if(r=r<0?n.length:r,decodeURIComponent(n.slice(0,r).replace(/^\s+/,""))===e)return decodeURIComponent(n.slice(r+1))}return null},e.erase=function(t,n){e.set(t,"",{expires:-1,domain:n&&n.domain,path:n&&n.path,secure:0,httponly:0})},e.all=function(){for(var e={},t=document.cookie.split(";");t.length;){var n=t.pop(),r=n.indexOf("=");r=r<0?n.length:r,e[decodeURIComponent(n.slice(0,r).replace(/^\s+/,""))]=decodeURIComponent(n.slice(r+1))}return e}}(f);let h=!1;const b=[],v=e=>{(e=>{const t="undefined"!=typeof process&&"production"===m([process,"access",e=>e.env,"optionalAccess",e=>e.NODE_ENV]);h||b.includes(e)||t||("undefined"==typeof window&&(e+="\nAre you running on a server? Most of storages are not available while running on a server."),console.warn(e),b.push(e))})(`Unable to find the ${e}. No data will be persisted.`)};let w=function(e){return void 0===e?"undefined":JSON.stringify(c(e,[]))},_=function(e,t){if(void 0===t&&(t=void 0),"string"!=typeof e)return e;if(void 0===t&&(t={}),"undefined"!==e){t=Object.fromEntries(r(r([],Object.entries(t),!0),Object.entries(i),!0));try{return u(JSON.parse(e),t,{})}catch(t){return e}}},O=l;function S(e,t,n){const r=t.getValue(n);return null!==r&&e.set(r),t.addListener&&t.addListener(n,(t=>{e.set(t)})),e.subscribe((e=>{t.setValue(n,e)})),{...e,delete(){t.deleteValue(n)}}}function L(){}function j(e=L,t=L){const n=[];return{callListeners(e,t){void 0!==t&&n.filter((({key:t})=>t===e)).forEach((({listener:e})=>e(t)))},addListener(t,r){n.push({key:t,listener:r}),1===n.length&&e()},removeListener(e,r){const o=n.indexOf({key:e,listener:r});-1!==o&&n.splice(o,1),0===n.length&&t()}}}function A(e,t=!1){const n=t=>{const n=t.key;t.storageArea===e&&o(n,_(t.newValue))},{removeListener:r,callListeners:o,addListener:i}=j((()=>{t&&"undefined"!=typeof window&&m([window,"optionalAccess",e=>e.addEventListener])&&window.addEventListener("storage",n)}),(()=>{t&&"undefined"!=typeof window&&m([window,"optionalAccess",e=>e.removeEventListener])&&window.removeEventListener("storage",n)}));return{addListener:i,removeListener:r,getValue(t){const n=e.getItem(t);return _(n)},deleteValue(t){e.removeItem(t)},setValue(t,n){e.setItem(t,w(n))}}}function E(e){try{return"object"==typeof window[e]}catch(e){return!1}}function k(e=!1){return E("localStorage")?A(window.localStorage,e):(v("window.localStorage"),I())}function C(e=!1){return E("sessionStorage")?A(window.sessionStorage,e):(v("window.sessionStorage"),I())}function x(e){return"undefined"==typeof document||"string"!=typeof m([document,"optionalAccess",e=>e.cookie])?(v("document.cookies"),I()):{getValue(e){const t=f.get(e);return _(t)},deleteValue(t){f.erase(t,{samesite:"Strict",...e})},setValue(t,n){f.set(t,w(n),{samesite:"Strict",...e})}}}var V;function I(){return{getValue:()=>null,deleteValue(){},setValue(){}}}function N(){return{...I(),addListener(){},removeListener(){}}}function U(){}!function(e){e[e.LOCAL=0]="LOCAL";e[e.SESSION=1]="SESSION";e[e.SYNC=2]="SYNC"}(V||(V={}));const $=[];function P(e,t=U){let n;const r=new Set;function o(t){if(function(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}(e,t)&&(e=t,n)){const t=!$.length;for(const t of r)t[1](),$.push(t,e);if(t){for(let e=0;e<$.length;e+=2)$[e][0]($[e+1]);$.length=0}}}function i(t){o(t(e))}return{set:o,update:i,subscribe:function(a,s=U){const c=[a,s];return r.add(c),1===r.size&&(n=t(o,i)||U),a(e),()=>{r.delete(c),0===r.size&&n&&(n(),n=null)}}}}const B={};function D(e){if(!Object.keys(B).includes(e))switch(e){case"cookie":B[e]=x();break;case"local":B[e]=k();break;case"session":B[e]=C()}return B[e]}function R(e,t){return S(e,D("cookie"),t)}function T(e,t){return S(e,D("session"),t)}function M(e,t){return S(e,D("local"),t)}function z(e,t,n){return M(P(t,n),e)}e.addSerializableClass=function(e){O(e)},e.cookieWritable=function(e,t,n){return R(P(t,n),e)},e.createChromeStorage=function(e=V.LOCAL,t=!1){if("object"!=typeof chrome||"object"!=typeof chrome.storage)return v("ChromeStorage"),N();let n="local";switch(e){case V.LOCAL:n="local";break;case V.SYNC:n="sync";break;case V.SESSION:n="session"}function r(e,t){if(t===n)for(const[t,{newValue:n}]of Object.entries(e))i(t,n)}const{removeListener:o,callListeners:i,addListener:a}=j((()=>{t&&chrome.storage.onChanged.addListener(r)}),(()=>{t&&chrome.storage.onChanged.removeListener(r)}));return{addListener:a,removeListener:o,getValue:e=>(chrome.storage[n].get([e],(t=>i(e,t.key))),null),setValue(e,t){chrome.storage[n].set({[e]:t})},deleteValue(e){chrome.storage[n].remove(e)}}},e.createCookieStorage=x,e.createIndexedDBStorage=function(){if("object"!=typeof indexedDB||!E("indexedDB"))return v("IndexedDB"),N();const{removeListener:e,callListeners:t,addListener:n}=j(),r=p("svelte-persist","persist");return{addListener:n,removeListener:e,getValue:e=>(function(e,t=g()){return t("readonly",(t=>d(t.get(e))))}(e,r).then((n=>t(e,_(n)))),null),setValue(e,t){!function(e,t,n=g()){n("readwrite",(n=>(n.put(t,e),d(n.transaction))))}(e,w(t),r)},deleteValue(e){!function(e,t=g()){t("readwrite",(t=>(t.delete(e),d(t.transaction))))}(e,r)}}},e.createLocalStorage=k,e.createNoopStorage=I,e.createSessionStorage=C,e.disableWarnings=function(){h=!0},e.localWritable=z,e.persist=S,e.persistBrowserLocal=M,e.persistBrowserSession=T,e.persistCookie=R,e.sessionWritable=function(e,t,n){return T(P(t,n),e)},e.setSerialization=function(e,t,n){var r,o;w=e,_=t,o=()=>()=>{},O=null!=(r=n)?r:o()},e.writable=function(e,t,n){return z(e,t,n)}}));
